<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.recklessmo.dao.setting.CourseSettingDAO">

    <sql id = "courseColumns">
        id, course_id, course_name, create_time, detail, type, org_id, deleted
    </sql>

    <sql id = "courseColumnsWithoutId">
        course_name, create_time, detail, type, org_id, deleted
    </sql>

    <insert id="addCourse">
        insert into course
        (
          <include refid="courseColumnsWithoutId"/>
        )
        values(#{courseName},#{createTime}, #{detail}, #{type}, #{orgId}, #{deleted})
    </insert>

    <update id="updateCourse">
        replace into course
        (
        <include refid="courseColumns"/>
        )
        values(#{courseId}, #{courseName},#{createTime}, #{detail}, #{type}, #{orgId}, #{deleted})
    </update>


    <select id="listCourse" resultType="com.recklessmo.model.setting.Course">
        select
        <include refid="courseColumns"/>
        from course
        where org_id = #{orgId} and deleted = 0
        order by course_id asc
        limit #{startIndex}, #{count}
    </select>

    <select id="listCourseCount" resultType="java.lang.Integer">
        select
        count(1)
        from course
        where org_id = #{orgId} and deleted = 0
    </select>

    <select id="getCourseById" resultType="com.recklessmo.model.setting.Course">
        select
        <include refid="courseColumns"/>
        from course where id = #{id}
    </select>

    <update id="deleteCourse">
        update course set deleted = 1 where id = #{id}
    </update>

</mapper>